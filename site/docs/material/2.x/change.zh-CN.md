`````
Material Market  2.0

# 2.0 变化

本文档介绍了 Arco 物料 2.x 的一些变化。
`````

## 背景
物料平台自 2020 年底上线第一个版本，其主要的设计理念一直沿用至今，并且基于 `arco-cli` 进行物料创建和发布，基于 `arco-scripts` 进行物料开发和构建。在实际运行的过程中，我们发现了一些问题：

* 物料分类：我们将物料分为 「组件」、「区块」、「页面」、「组件库」、「工具函数」等不同的类型，增加了理解成本，并且无法在物料详情页面直接预览「组件库」类型的物料；
* 物料预览：我们基于 [react-live](https://github.com/FormidableLabs/react-live) 采用了运行时渲染的方式来预览组件 Demo，这样为用户在线调试 Demo 提供了便利，但却为组件 Demo 的书写带来了很多[限制](https://arco.design/docs/material/build#demo-%E4%BE%9D%E8%B5%96)，导致一些物料 Demo 无法正常预览；
* 文档组织：在 1.x 的 Demo 规范中，需要通过 JSDoc 的形式为 Demo 添加注释来作为 Demo 的描述，这样非常不直观，并且没有自由编辑 Demo 文档的途径；
* 团队站点：为了给团队提供一种更为聚合的文档站点体验，我们提供了「团队站点」的功能。尽管团队站点有着非常高的灵活度，但也带来一些问题：
   * 物料重复：由于团队站点独立存在，其中的物料不需要发布至物料平台，可能造成某个物料既存在于团队站点又存在于平台物料列表；
   * 数据统计困难：同样由于其灵活性，我们丧失了很多对于团队站点物料的统计维度，以及存在数据统计重复的问题；
   * 学习成本：用户除了要理解物料的基础概念和操作，还需要额外理解团队站点的内容。

## 变化
针对上述问题，我们对物料概念进行了精简，并重新开发了 CLI 工具进行辅助开发。2.x 与 1.x 版本的物料相比，主要存在以下的变化（进行中但未完成的部分以 TODO 标出）：

* 精简物料分类，所有物料均被称为组件：
   * 以是否允许 Fork 来替代「区块」和「页面」的概念。与普通的组件相比，「区块」和「页面」可以理解为 “需要用户对其源码进行二次编辑后才可使用的组件”，Fork 操作可将组件源码直接插入到用户项目进行二次开发；
   * 物料不再与 NPM 包进行维度绑定。重新设计的物料 ID 为 `npmPcakgeName/ComponentName`，即使某个 NPM 包中存在多个组件，它们也可与物料进行一一对应（例如，`@arco-design/web-react/Button` 和 `@arco-design/web-react/Tag` 虽然来自同一个 NPM 包，但它们是两个相互独立的物料）；
* 物料文档维护方式改变：
   * 在构建过程中对 Demo 进行编译，以保证 Demo 可在平台中正常预览；
   * 采用 [MDX](https://mdxjs.com/) 进行物料文档书写，可以自由组织文档内容；
* 团队主页物料展示方式优化：
   * 用户进入某一团队浏览其物料时，视图将切换为类文档站视图，拥有更好层级区分和浏览体验；
   * 提供物料菜单的在线编辑能力，用户可自由对团队物料进行编组；

![image](https://p9-arcosite.byteimg.com/tos-cn-i-goo7wpa0wc/226eedbd9c2646aeba24a088b53a95de~tplv-goo7wpa0wc-image.image)


* 重新设计的 CLI 工具：
   * 将 `arco-cli` 与 `arco-scripts` 的能力合并，并摒弃了全局安装的方式；
   * API 文档提取自动化，通过简单配置并遵循 API 文档书写规则，即可在物料文档中自动注入组件 API 文档；
   * 基于 workspace 理念进行工作区物料管理，极大精简了 CLI 相关的配置文件；
   * 基于 MDX 进行组件文档书写，全新开发体验；
   * [TODO] 提供了统一交互和 API 设计，后续将继续在此 CLI 上拓展对于 Vue / Node 类型物料的支持；

## 关于团队站点
鉴于上述提到的团队站点所带来的弊端和此次大版本优化，后续我们将把主要的精力用于 2.x 版本物料的迭代，团队站点将逐步进入仅维护状态。**如果你是首次使用物料平台，我们不建议使用团队站点功能，请基于 2.x 搭建你的团队物料。**

关于物料 2.x 的升级背景和主要变化介绍至此，继续阅读以了解如何开始。
